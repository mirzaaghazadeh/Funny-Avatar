<!DOCTYPE html>
<html>
<head>
<style type="text/css">
.canvas {
    height: 600px;
    width: 400px;
    overflow: hidden;
    background-color: #fff;
    margin: 58px auto;
    background-size: 400px 600px;
}

.box-in-use * {
    overflow: visible !important;
}

.box-in-use:hover img {
    outline-style: dashed;
    outline-color: #b6b6b6;
}

.box-in-use button {
    display: none;
}

.box-in-use:hover button {
    display: block;
    position: absolute;
    color: #FFF;
    font-size: 1.6em;
    line-height: 22px;
    z-index: 5;
    border-radius: 100%;
    border: 0;
    background-color: #f83636;
}

.box-upload-dialog {
    display: none;
    background-color: rgba(5,5,5,0.46);
    position: fixed;
    left: 0;
    top: 0;
    height: 100%;
    width: 100%;
}

.upload-dialog {
    width: 256px;
    background-color: #FFF;
    margin: 257px auto;
    padding: 55px;
    box-shadow: 0 0 2px;
    border-radius: 2px;
}

.upload-dialog button {
    color: #fff;
    margin-top: 20px;
    margin-left: 5px;
    padding: 5px;
    float: right;
    background-color: #A47834;
    border: 0;
}
</style>

	<title>FunnyAvatar</title>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
	<link rel="stylesheet" type="text/css" href="style.css"/>
	<script src="js/jquery.js"></script>
	<script src="js/jquery-ui.min.js"></script>
	<script src="js/html2canvas.js"></script>
	<link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">

</head>
<body>
	<section class="main">
		<header>
			<h1>FunnyAvatar.com</h1>
			<input id="upload" type="button" value="Upload (New)" />
			<input type="button" id="exportAS" value="Export as JPEG" />
			<a download="export_avatar_image" id="saveAs" style="display: none">Save As</a>
		</header>
		<div id="canvas" class="canvas">

		</div>

	</section>

	<aside>
		<ul class="main">
			<li id="beard" class="active">Beard</li>
			<li id="eyebrows">Eyebrow</li>
			<li id="eyes">Eye</li>
			<li id="glasses">Glasses</li>
			<li id="hat">Hat</li>
			<li id="moustache">Moustache</li>
			<li id="mouth">Mouth</li>
		</ul>
		<ul class="sub">
			<li class="items" id="beard">
				<img src="images/Beard/01.png" width="70" />
				<img src="images/Beard/02.png" width="70" />
				<img src="images/Beard/03.png" width="70" />
			</li>
			<li class="items" id="eyebrows">
				<img src="images/Eyebrows/01.png" width="70" />
				<img src="images/Eyebrows/02.png" width="70" />
				<img src="images/Eyebrows/03.png" width="70" />
				<img src="images/Eyebrows/04.png" width="70" />
				<img src="images/Eyebrows/05.png" width="70" />
				<img src="images/Eyebrows/06.png" width="70" />
				<img src="images/Eyebrows/07.png" width="70" />
				<img src="images/Eyebrows/08.png" width="70" />
				<img src="images/Eyebrows/09.png" width="70" />
				<img src="images/Eyebrows/10.png" width="70" />
				<img src="images/Eyebrows/11.png" width="70" />
				<img src="images/Eyebrows/12.png" width="70" />
				<img src="images/Eyebrows/13.png" width="70" />
				<img src="images/Eyebrows/14.png" width="70" />
				<img src="images/Eyebrows/15.png" width="70" />
				<img src="images/Eyebrows/16.png" width="70" />
				<img src="images/Eyebrows/17.png" width="70" />
				<img src="images/Eyebrows/18.png" width="70" />
			</li>
			<li class="items" id="eyes">
				<img src="images/Eyes/01.png" width="70" />
				<img src="images/Eyes/02.png" width="70" />
				<img src="images/Eyes/03.png" width="70" />
				<img src="images/Eyes/04.png" width="70" />
				<img src="images/Eyes/05.png" width="70" />
				<img src="images/Eyes/06.png" width="70" />
				<img src="images/Eyes/07.png" width="70" />
				<img src="images/Eyes/08.png" width="70" />
				<img src="images/Eyes/09.png" width="70" />
				<img src="images/Eyes/10.png" width="70" />
				<img src="images/Eyes/11.png" width="70" />
				<img src="images/Eyes/12.png" width="70" />
				<img src="images/Eyes/13.png" width="70" />
				<img src="images/Eyes/14.png" width="70" />
				<img src="images/Eyes/15.png" width="70" />
				<img src="images/Eyes/16.png" width="70" />
				<img src="images/Eyes/17.png" width="70" />
				<img src="images/Eyes/18.png" width="70" />
			</li>
			<li class="items" id="glasses">
				<img src="images/Glasses/01.png" width="70" />
				<img src="images/Glasses/02.png" width="70" />
				<img src="images/Glasses/03.png" width="70" />
				<img src="images/Glasses/04.png" width="70" />
				<img src="images/Glasses/05.png" width="70" />
				<img src="images/Glasses/06.png" width="70" />
				<img src="images/Glasses/07.png" width="70" />
				<img src="images/Glasses/08.png" width="70" />
				<img src="images/Glasses/09.png" width="70" />
				<img src="images/Glasses/10.png" width="70" />
				<img src="images/Glasses/11.png" width="70" />
				<img src="images/Glasses/12.png" width="70" />
			</li>
			<li class="items" id="hat">
				<img src="images/Hat/01.png" width="70" />
				<img src="images/Hat/02.png" width="70" />
				<img src="images/Hat/03.png" width="70" />
			</li>
			<li class="items" id="moustache">
				<img src="images/Moustache/01.png" width="70" />
				<img src="images/Moustache/02.png" width="70" />
				<img src="images/Moustache/03.png" width="70" />
				<img src="images/Moustache/04.png" width="70" />
				<img src="images/Moustache/05.png" width="70" />
				<img src="images/Moustache/06.png" width="70" />
				<img src="images/Moustache/07.png" width="70" />
				<img src="images/Moustache/08.png" width="70" />
				<img src="images/Moustache/09.png" width="70" />
				<img src="images/Moustache/10.png" width="70" />
				<img src="images/Moustache/11.png" width="70" />
				<img src="images/Moustache/12.png" width="70" />
			</li>
			<li class="items" id="mouth">
				<img src="images/Mouth/01.png" width="70" />
				<img src="images/Mouth/02.png" width="70" />
				<img src="images/Mouth/03.png" width="70" />
				<img src="images/Mouth/04.png" width="70" />
				<img src="images/Mouth/05.png" width="70" />
				<img src="images/Mouth/06.png" width="70" />
				<img src="images/Mouth/07.png" width="70" />
				<img src="images/Mouth/08.png" width="70" />
				<img src="images/Mouth/09.png" width="70" />
				<img src="images/Mouth/10.png" width="70" />
			</li>
		</ul>
	</aside>

	<div class="box-upload-dialog">
		<div class="upload-dialog">
			<h2>-- Upload the image here --</h2>
			<input type="file" class="upload" accept="image/*">
			<button type="button" id="select">Select it!</button>
			<button type="button" id="close">Close</button>
		</div>
	</div>

	<script>
 $(function() {
     var currentGroup;
     $('img').draggable({
         helper: "clone",
         stop: function(event, ui) {
             var group = ui.helper.context.parentElement.id;
             if (ui.position.left < 0 && currentGroup !=
                 group) {
                 currentGroup = group;
                 var item = ui.helper.context;
                 var elem =
                     '<div class="box-in-use" style="display:inline-block;"><button type="button"> - </button><img class="in-use" src="' +
                     item.src + '" width="70"/></div>';
                 $('#canvas').append(elem);
                 $('.box-in-use').draggable({
                     containment: ".canvas",
                     stop: function(event, ui) {}
                 });
                 $('.in-use').resizable({
                     containment: ".canvas",
                     animate: true,
                     ghost: true,
                     aspectRatio: true,
                     handles: "n, e, s, w",
                 });
                 $('.box-in-use button').click(function() {
                     $(this).parents().get(0).remove();
                     currentGroup = (currentGroup ==
                         group) ? null : group;
                 });
             }
         }
     });
     $('#upload').click(function() {
         $('.box-upload-dialog').fadeIn();
     });
     $('#close').click(function() {
         $('.box-upload-dialog').fadeOut();
     });
     $('#select').click(function() {
         var file = $('.upload')[0].files[0];
         if (file) {
             var reader = new FileReader();
             reader.onload = function(e) {
                 $('#canvas').attr('style',
                     "background-image: url(" + e.target
                     .result + ")");
             }
             reader.readAsDataURL(file);
             $('.box-upload-dialog').fadeOut();
         } else {
             alert('place take the image!')
         }
     });
     $('#exportAS').click(function readyToDownload() {
         html2canvas($('#canvas'), {
             onrendered: function(canvas) {
                 $('#saveAs').prop('href', canvas.toDataURL(
                     'image/jpeg'));
                 $('#saveAs').get(0).click();
             }
         });
     });
     $("ul.main li").click(function() {
         $("ul.main li").removeClass('active');
         $(this).addClass('active');
         i = $(this).attr('id');
         $("li.items").hide();
         $("li.items#" + i).show();
     })
 });
	</script>
</body>
</html>

